# 4주차 데이터베이스 프로그래밍 학습회고


## 테스트 동영상 링크
  https://youtu.be/bNGJ1tH75MQ


## 1. 새로 배운 내용
  * 테이블은 \<table> 태그로 만든다. \<table border="1">은 테이블 경계를 1로 한다는 뜻이다. 행은 \<tr>, 열은 \<td>, 그 중에서 제목줄(가운데 정렬, 진하게)은 \<th>를 쓴다.

  * print_r() : 중간에 출력되는 sql문을 보는 기능
  ```
  print_r(variable, return);
  ```

  * header() 는 아무런 처리를 하지 않은(raw) HTTP 헤더를 송신하기위해 사용한다.
  ```
  void header ( string $string [, bool $replace [, int $http_response_code ]] )
  ```
  (출처: http://pager.kr/x/index.php?mid=board_WsUz20&document_srl=1967)


## 2. 문제가 발생하거나 고민한 내용 + 해결 과정
  * 2주차 과제를 할 당시에 2주차에 만든 과제를 이용해서 이어서 쭉 3, 4주차 과제를 할 것이라는 것을 생각하지 못하고 데이터베이스의 이름을 'dbp_w02_practice'로 지정하여 생성했었다. 2주차 과제가 아님에도 불구하고 이 데이터베이스 이름을 계속 쓰는 것은 응집성이 떨어진다고 생각하여 데이터베이스 이름을 바꾸려고 이것저것 시도해보았다. 그러다 착오가 생겨 'dbp_w02_practice'의 topic 테이블이 삭제가 되어버렸다.(!!)

  * 결국 그냥 새로운 'dbp_homework'라는 이름의 데이터베이스를 생성하고 topic 테이블을 다시 생성했다. 데이터베이스에 데이터를 INSERT 할 때는 원래 터미널에서 INSERT문을 이용해서 입력해야 하지만, 이미 간편하게 데이터베이스 테이블에 입력할 수 있는 웹사이트를 만들어놨으므로 쉽게 내용을 입력하고 '제출' 버튼을 누르는 것만으로 데이터를 빠르게 테이블에 삽입했다.

  * MySQL의 데이터베이스 이름을 바꾸는 쿼리문 자체는 MySQL 5.1.23에서 제거되었다고 한다. ()그래서 다른 여러가지 방법으로 데이터베이스 이름을 변경할 수 있다고 한다.)

  * 과제를 하는 중에는 process_create_author.php 파일을 작성한 후 author 페이지에서 시험삼아 name과 profile을 작성하고 create author 버튼을 누르니까 데이터가 데이터베이스에 추가가 되지 않았다. 오타가 있는지 계속 검토하고 무엇이 문제인지 찾아보았는데, 원인을 찾지 못했다. 그래서 파일을 삭제하고 새로 만들고 다시 입력하니까 작동이 잘 되었다.


## 3. 참고할만한 내용
  * htmlspecialchars() 함수의 역할은 예를 들어, 사용자가 게시판에 글을 올릴 때 문장 내에 HTML 코드가 들어가는 특수 문자를 포함시켜 입력한 후 화면으로 출력할 때 그 HTML 특수 문자가 HTML 태그로 적용되어 출력되는 것이 아니라, HTML 특수 문자가 일반 문자로 인식되어 그대로 출력되도록 해준다.
  (출처: https://dydwo15.tistory.com/entry/htmlspecialchars-함수)

  * 저자를 삭제하면 삭제된 저자가 남긴 글도 함께 삭제하는 기능을 구현해보았다. 교수님이 말씀해주신 대로 'process_delete_author.php'에서
  ```
  $query = "
    DELETE
      FROM author
      WHERE id = '{$filtered['id']}'
  ";

  $result = mysqli_multi_query($link, $query);
  ```
  저자 정보를 삭제하는 기능을 구현한 코드 밑에 같은 id를 가진 topic의 author_id을 삭제하는 쿼리를 작성하고 던지는 코드를 작성했다. 위 코드 아래에 다음 코드를 적는다.
  ```
  $query = "
    DELETE
      FROM topic
      WHERE author_id = '{$filtered['id']}'
  ";

  $result = mysqli_multi_query($link, $query);
  ```

## 4. 회고
  * 좋았던 점은 이번 주에는 데이터베이스에서 중요한 기능 중 하나인 JOIN을 사용해서 테이블을 연결하여 웹사이트로 보여주는 기능을 배운 것이 가장 좋았다. 그리고 교수님을 따라서 코드를 프로그램에 치는 것 뿐이지만 코드가 점점 길어지는 게 은근하게 기분이 좋았다.

  * 아쉬웠던 점은 강의를 여러 번 돌려듣는 편인데 이번 주는 유독 시간이 부족해서 촉박하게 겨우 과제를 끝낸 것 같다. 시간을 조금 더 여유롭게 가지고 생활하고 싶은데 쉽지 않다.. 다음 주는 조금 더 부지런히 강의를 듣고 과제를 해야 할 것 같다.

  * 새로 알게 된 것 중에서는 header 함수가 인상깊었다. 이제껏 '성공했습니다' 또는 '실패했습니다'등의 페이지를 거치고 '돌아가기' 버튼을 눌러야 했는데, header 함수를 이용하면 마치 한 페이지에서 동작하는 것 같이 보여주어 간편하게 웹사이트를 이용해줄 수 있는 좋은 기능인 것 같다.
